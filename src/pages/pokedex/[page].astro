---
import Layout from "../../layouts/Layout.astro";
import {getPokeData} from '../../services/service.ts';
import {type iPokemon, type iType} from '../../types/api.ts';


export async function getStaticPaths({ paginate }) {
    const data = await getPokeData()
    return paginate(data, {pageSize: 20})
}

const { page } = Astro.props;
---

<Layout title="PokeDex">
    <main>
        <div class="header">
            <img src="/header_logo/pokedex-img.png" alt="Logo for Header Section" width="400px">
        </div>
    
        <div class="parent">
            {
                page.data.map((pokemon: iPokemon) => 
                    <div class="parentNode">
                        <p>{"N.ยบ "+pokemon.id}</p>
                        <img src={pokemon.sprites.front_default} alt="">
                        <h1>{pokemon.name}</h1>
                        <ul class="typesList">
                            {
                                pokemon.types.map((tipos: iType) => 
                                    <li>
                                        {tipos.type.name}
                                        <img src={"/typesIcons/" + tipos.type.name + ".png"} alt="Icono" width="22px">
                                    </li>  
                                    
                                )
                            }
                        </ul>
                    </div>
                )
            }
        </div>
    
        <div class="btnControls">
            <a href={page.url.prev} class="btnBack"><i class="fa-solid fa-circle-chevron-left" style="color: #000000;"></i></a>
            <a href={page.url.next} class="btnNext"><i class="fa-solid fa-circle-chevron-right" style="color: #000000;"></i></a>
        </div>
    </main>
</Layout>

<style>
    .header{
        text-align: center;
        margin-bottom: 1rem;
    }

    .parent {
        display: grid;
        margin: auto;
        display: grid;
        gap: 1em;
    }

    .parentNode{
        text-align: center;
        background-color: rgb(255, 255, 255, 0.8);
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
        border-top-right-radius: 5px;
        transition: all 0.2s;
        overflow: hidden;
        padding: 5px;
    }

    .parentNode p{
        text-align: end;
        font-weight: bold;
    }

    .parentNode h1{
        text-transform: capitalize;
        font-size: 25px;
    }

    .typesList{
        list-style-type: none;
        display: flex;
        flex-flow: row nowrap;
        gap: 2rem;
        justify-content: center;
    }

    .typesList li{
        display: flex;
        align-items: center;
        gap: 0.2rem;
    }

    .btnControls{
        margin: 2em 0rem;
        display: flex;
        flex-flow: row wrap;
        justify-content: center;
        gap: 4rem;
    }

    .btnControls a{
        text-align: center;
        width: 20px;
        height: 20px;
        scale: 2;
        background-color: white;
        border-radius: 150px;
    }

    .btnControls a i {
        transition: scale 0.3s;
    }

    .btnControls a:hover i{
        cursor: pointer;
        scale: 1.29;
    }


    @media screen and (min-width:100px){
        .parent{
            width: 90%;
            grid-template-columns: repeat(1, 1fr);
            grid-template-rows: repeat(20, 1fr);
        }
    }

    @media screen and (min-width:700px){
        .parent{
            width: 85%;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(7, 1fr);
        }
    }

    @media screen and (min-width:1024px){
        .parent{
            width: 80%;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(7, 1fr);
        }

    }

    @media screen and (min-width:1440px){
        main{
            height: 100vh;
        }
        .parent{
            width: 75%;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(4, 1fr);
        }

    }

</style>